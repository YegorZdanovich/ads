<%= form_for @ads, :html => { :class => "form-horizontal"} do |f| %>
  

  <div class="control-group">
    <%= f.label "Type", :class => "control-label" %>
    <div class="controls">
      <%= f.label @ads.type.value %>
    </div>
  </div>
  
  <%= render partial: "title_form", locals: {f: f} %>
  <%= render partial: "text_form", locals: {f: f} %>
  <%= render partial: "contact_form", locals: {f: f} %>
  <%= render partial: "status_form", locals: {f: f} %>   
  <%= render partial: "image", collection: @ads.images %>
  

  <div class="form-actions">

    <%= link_to "go home", root_path, :class => "btn" %>

    <!-- admin can update only 'new' ads-->
    <% if (can? :update, @ads) && (current_user.role.admin?) %>
      <%= f. select(:status,["canceled","approved"]) %>
      <%= f.submit "Update Status", :class => "btn btn-primary"%>
    <% end %>
    
    <!-- user can update only 'draft' or 'archival' ads-->
    <% if (can? :update, @ads) && (current_user.role.user?) %>
      <%= f. select(:status, @ads.status_transitions.map(&:to)+[@ads.status]) %>
      <%= f.submit "Update", :class => "btn btn-primary"%>
    <% end %>

    <% if can? :destroy, Advertisement %>
      <%= link_to "Delete advertisement", advertisement_path(@ads), :class =>"btn btn-danger",
                  method: :delete, data: {confirm: "Are you sure?"}%>
    <% end %>

  </div>

<% end %>